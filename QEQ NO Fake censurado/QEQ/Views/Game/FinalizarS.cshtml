@{
    ViewBag.Title = "FinalizarS";
    int i = 0;
}
@using QEQ.Models
<h2>@ViewBag.Msg</h2>
<div class="FinalizarPart">
    <h3>Tu personaje era @BD.laPartida.Personaje1.Nombre</h3>
    <img src="@BD.laPartida.Personaje1.Direccion" />
</div>
<p><a href="@Url.Action("TypeGame","Game")" class="btn btn-primary btn-lg">Ir al Game  &raquo;</a></p>
<div class="RankHistorial">
    Ranking de Partidas<br />
    <table border="1" align="right">
        <tr>
            <td>Puesto</td>
            <td>ID</td>
            <td>Jugador</td>
            <td>Puntos</td>
            <td>Cantidad de Preguntas</td>
            <td>Personaje Jugado</td>
        </tr>
        @while (i < 5 && i < BD.Ranking.Count)
        {
            <tr>
                <td>Top @i </td>
                <td>@BD.Ranking[i].Id.ToString()</td>
                <td>@BD.BuscarUsuario(BD.Ranking[i].Usuario1).Nombre</td>
                <td>@BD.Ranking[i].Puntos.ToString()</td>
                <td>@BD.Ranking[i].CantPreguntas.ToString()</td>
                <td> <img class="img-responsive" src="@BD.Ranking[i].Personaje1.Direccion" width="135" /> <br />@BD.Ranking[i].Personaje1.Nombre</td>
            </tr>
            i++;
        }

    </table>
</div>
<div  class="RankHistorial">
    Historial de preguntas
    <table border="1" >
        <tr>
            <td>ID</td>
            <td>Texto</td>
            <td>Costo</td>
            <td>Grupo</td>
            <td>Cantidad de descartados</td>
        </tr>
        @foreach (int idPregunta in BD.laPartida.Historial.Keys)
        {
            Preg preg = BD.BuscarPregunta(idPregunta/10);
            <tr>
                <td>@preg.Id</td>
                <td>@preg.Texto?</td>
                <td>@preg.Puntos</td>
                <td>@BD.BuscarCat(preg.idGrupo, BD.Grupos).Nombre</td>
                <td>@BD.laPartida.Historial[idPregunta]</td>
            </tr>
        }

    </table>
</div>


